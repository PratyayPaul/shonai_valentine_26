:root{
  --bg1:#050714;
  --bg2:#0b1030;
  --pink:#ff4d8d;
  --pink2:#ff7ab2;
  --white:#ffffff;
  --muted: rgba(255,255,255,.75);
  --shadow: 0 20px 60px rgba(0,0,0,.35);
  --radius: 22px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
  color: var(--white);
  background:
    radial-gradient(1200px 600px at 30% 10%, rgba(255,77,141,.18), transparent 55%),
    radial-gradient(900px 500px at 70% 20%, rgba(255,122,178,.14), transparent 50%),
    linear-gradient(180deg, var(--bg1), var(--bg2));
  overflow-x:hidden;
}

/* ambient sky overlay */
.sky{
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(800px 400px at 20% 15%, rgba(255,77,141,.12), transparent 60%),
    radial-gradient(700px 380px at 80% 10%, rgba(255,122,178,.10), transparent 62%),
    radial-gradient(1000px 520px at 50% 90%, rgba(255,255,255,.06), transparent 60%);
  mix-blend-mode: screen;
  opacity:.9;
}

/* drifting tiny stars in background */
.stars-layer{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.bg-star{
  position:absolute;
  width:2px;
  height:2px;
  border-radius:999px;
  background: rgba(255,255,255,.9);
  box-shadow: 0 0 10px rgba(255,255,255,.6);
  opacity:.75;
  animation: floaty linear infinite;
}
@keyframes floaty{
  from{ transform: translateY(0px); opacity:.65; }
  50%{ transform: translateY(-18px); opacity:1; }
  to{ transform: translateY(0px); opacity:.65; }
}

.page{
  position:relative;
  max-width: 980px;
  margin: 0 auto;
  padding: 40px 18px 120px;
}

.act{
  min-height: 92vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 28px 0;
}

.act-content{
  width:100%;
  background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.05));
  border: 1px solid rgba(255,255,255,.14);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 28px 22px;
  backdrop-filter: blur(10px);
}

.tiny{
  margin:0 0 10px;
  letter-spacing:.08em;
  text-transform: uppercase;
  font-size: 12px;
  color: rgba(255,255,255,.7);
}

.title{
  margin: 6px 0 10px;
  font-size: clamp(30px, 4vw, 44px);
  line-height: 1.06;
}

.subtitle{
  margin: 0 0 18px;
  color: var(--muted);
  font-size: 16px;
  line-height: 1.5;
}

.hint-row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin: 12px 0 18px;
}

.chip{
  font-size: 13px;
  padding: 8px 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.12);
  color: rgba(255,255,255,.82);
}

/* ===== Act 1 Moon ===== */
.moon-field{
  position:relative;
  width: 100%;
  height: 320px;
  border-radius: 18px;
  background:
    radial-gradient(900px 420px at 50% 60%, rgba(255,255,255,.06), transparent 55%),
    rgba(0,0,0,.14);
  border: 1px solid rgba(255,255,255,.10);
  overflow:hidden;
}

/* the moon button */
.moon{
  position:absolute;
  left: 62%;
  top: 38%;
  width: 78px;
  height: 78px;
  border-radius: 999px;
  border: 0;
  cursor:pointer;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,.95), rgba(255,255,255,.75) 42%, rgba(220,225,255,.55) 72%, rgba(180,190,255,.35) 100%);
  box-shadow:
    0 0 18px rgba(255,255,255,.55),
    0 0 34px rgba(255,77,141,.18);
  transition: transform .15s ease, filter .2s ease;
}

/* subtle craters */
.moon::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:999px;
  background:
    radial-gradient(circle at 35% 40%, rgba(0,0,0,.10), transparent 22%),
    radial-gradient(circle at 60% 55%, rgba(0,0,0,.08), transparent 18%),
    radial-gradient(circle at 48% 28%, rgba(0,0,0,.07), transparent 20%);
  mix-blend-mode: multiply;
  opacity:.35;
}

.moon:hover{ transform: translateY(-2px) scale(1.02); }
.moon:active{ transform: translateY(0px) scale(0.98); }

/* gentle glow pulse */
.moon{
  animation: moonPulse 2.2s ease-in-out infinite;
}
@keyframes moonPulse{
  0%,100%{ filter: brightness(1); }
  50%{ filter: brightness(1.12); }
}

/* moonlight spill */
.moonlight{
  position:absolute;
  inset:-40px;
  background:
    radial-gradient(circle 180px at 62% 38%, rgba(255,255,255,.20), transparent 65%),
    radial-gradient(circle 320px at 58% 50%, rgba(255,77,141,.12), transparent 70%),
    radial-gradient(circle 520px at 55% 70%, rgba(255,255,255,.10), transparent 72%);
  opacity:0;
  transform: scale(.96);
  pointer-events:none;
}

.moonlight.show{
  animation: moonSpill 1.1s ease-out forwards;
}

/* Stars inside the moon box */
.box-star{
  position:absolute;
  width: 3px;
  height: 3px;
  border-radius: 999px;
  background: rgba(255,255,255,.92);
  box-shadow: 0 0 10px rgba(255,255,255,.55);
  opacity: .65;
  animation: twinkle 3.4s ease-in-out infinite;
  pointer-events:none; /* important: don't block moon clicks */
}

.box-star.s2{ width:2px; height:2px; opacity:.55; }
.box-star.s4{ width:4px; height:4px; opacity:.75; }

@keyframes twinkle{
  0%,100%{ opacity:.35; transform: translateY(0px); }
  50%{ opacity:1; transform: translateY(-8px); }
}


@keyframes moonSpill{
  0%{ opacity:0; transform: scale(.94); }
  45%{ opacity:1; transform: scale(1.02); }
  100%{ opacity:.92; transform: scale(1); }
}

/* optional: tiny sparkles when tapped */
.moon-spark{
  position:absolute;
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: rgba(255,255,255,.95);
  box-shadow: 0 0 14px rgba(255,255,255,.8);
  pointer-events:none;
  animation: spark 700ms ease-out forwards;
}
@keyframes spark{
  from{ opacity:0; transform: translate(0,0) scale(.6); }
  20%{ opacity:1; }
  to{ opacity:0; transform: translate(var(--dx), var(--dy)) scale(1.1); }
}


.star-field{
  position:relative;
  width: 100%;
  height: 320px;
  border-radius: 18px;
  background:
    radial-gradient(900px 420px at 50% 60%, rgba(255,255,255,.06), transparent 55%),
    rgba(0,0,0,.14);
  border: 1px solid rgba(255,255,255,.10);
  overflow:hidden;
}

/* clickable stars */
.star-btn{
  position:absolute;
  width: 22px;
  height: 22px;
  border: 0;
  padding: 0;
  background: transparent;
  cursor:pointer;
  transform: translate(-50%, -50%);
  transition: transform .15s ease, opacity .15s ease;
}
.star-btn:hover{ transform: translate(-50%, -50%) scale(1.12); }
.star-btn:active{ transform: translate(-50%, -50%) scale(0.98); }

/* star shape */
.star-btn::before{
  content:"";
  position:absolute;
  inset:0;
  background: rgba(255,255,255,.95);
  clip-path: polygon(
    50% 0%,
    61% 35%,
    98% 35%,
    68% 57%,
    79% 91%,
    50% 70%,
    21% 91%,
    32% 57%,
    2% 35%,
    39% 35%
  );
  filter: drop-shadow(0 0 8px rgba(255,255,255,.55));
}

/* soft aura */
.star-btn::after{
  content:"";
  position:absolute;
  inset:-10px;
  border-radius:999px;
  background: radial-gradient(circle, rgba(255,255,255,.35), transparent 60%);
  opacity:.35;
}

/* special star = bigger + pink glow */
.star-special{
  width: 32px;
  height: 32px;
}
.star-special::before{
  background: rgba(255,255,255,.98);
  filter:
    drop-shadow(0 0 12px rgba(255,255,255,.85))
    drop-shadow(0 0 18px rgba(255,77,141,.70));
}
.star-special::after{
  inset:-16px;
  background: radial-gradient(circle, rgba(255,77,141,.45), rgba(255,255,255,.25), transparent 65%);
  opacity:.6;
  animation: glow 1.8s ease-in-out infinite;
}
@keyframes glow{
  0%,100%{ filter: brightness(1); }
  50%{ filter: brightness(1.35); }
}

/* shooting star */
.shooting{
  pointer-events:none;
  animation: shoot .9s ease-out forwards;
}
@keyframes shoot{
  0%{ opacity:1; transform: translate(-50%, -50%) scale(1); }
  100%{ opacity:0; transform: translate(calc(-50% + 240px), calc(-50% + 120px)) scale(.7); }
}

.trail{
  position:absolute;
  width: 160px;
  height: 2px;
  background: linear-gradient(90deg, rgba(255,255,255,.0), rgba(255,255,255,.85), rgba(255,77,141,.55));
  transform-origin: left center;
  opacity: .95;
  animation: trail .9s ease-out forwards;
  pointer-events:none;
}
@keyframes trail{
  0%{ transform: rotate(25deg) scaleX(.2); opacity:0; }
  20%{ opacity:1; transform: rotate(25deg) scaleX(1); }
  100%{ opacity:0; transform: rotate(25deg) scaleX(1.2); }
}

.unlock-row{
  margin-top: 16px;
  display:flex;
  justify-content:flex-end;
}

.primary{
  border: 0;
  border-radius: 999px;
  padding: 12px 16px;
  font-weight: 700;
  color: #0c0f2b;
  background: linear-gradient(180deg, var(--pink2), var(--pink));
  cursor:pointer;
  box-shadow: 0 10px 30px rgba(255,77,141,.35);
}
.primary:hover{ filter: brightness(1.05); }
.hidden{ display:none; }

/* toast */
.toast{
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  background: rgba(15, 18, 44, .78);
  border: 1px solid rgba(255,255,255,.16);
  padding: 10px 12px;
  border-radius: 999px;
  font-size: 13px;
  color: rgba(255,255,255,.88);
  box-shadow: 0 20px 60px rgba(0,0,0,.35);
  opacity:0;
  pointer-events:none;
  transition: opacity .2s ease;
}
.toast.show{ opacity:1; }

/* =========================
   ACT 2 — Memory Wall
========================= */
.act2-wrap{
  margin-top: 26px;
  min-height: 92vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 28px 0;
}

.act2-title{
  margin: 6px 0 10px;
  font-size: clamp(24px, 3.2vw, 34px);
  line-height: 1.1;
}

.act2-subtitle{
  margin: 0 0 18px;
  color: var(--muted);
  font-size: 15px;
  line-height: 1.5;
}

.grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 14px;
  margin-top: 14px;
}

@media (max-width: 820px){
  .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 520px){
  .grid{ grid-template-columns: 1fr; }
}

.card{
  position:relative;
  height: 160px;
  border-radius: 18px;
  perspective: 1000px;
}

.card-inner{
  position:absolute;
  inset:0;
  border-radius: 18px;
  transform-style: preserve-3d;
  transition: transform .55s ease;
}

.card.flipped .card-inner{
  transform: rotateY(180deg);
}

.face{
  position:absolute;
  inset:0;
  border-radius: 18px;
  backface-visibility: hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 16px;
  text-align:center;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.08);
}

.face.front{
  box-shadow: 0 18px 50px rgba(0,0,0,.25);
}

.face.back{
  transform: rotateY(180deg);
  background: linear-gradient(180deg, rgba(255,122,178,.16), rgba(255,255,255,.06));
}

.card-title{
  font-weight: 800;
  font-size: 16px;
  letter-spacing: .2px;
}

.card-text{
  font-size: 14px;
  line-height: 1.5;
  color: rgba(255,255,255,.9);
}

.progress-row{
  display:flex;
  justify-content:space-between;
  gap: 10px;
  flex-wrap:wrap;
  margin-top: 12px;
}

.progress-pill{
  font-size: 13px;
  padding: 8px 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.12);
  color: rgba(255,255,255,.82);
}

.act2-continue{
  margin-top: 18px;
  display:flex;
  justify-content:flex-end;
}

/* =========================
   ACT 3 — Hidden Hearts Quest
========================= */
.act3-wrap{
  margin-top: 26px;
  min-height: 92vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 28px 0;
}

.act3-title{
  margin: 6px 0 10px;
  font-size: clamp(24px, 3.2vw, 34px);
  line-height: 1.1;
}

.act3-subtitle{
  margin: 0 0 18px;
  color: var(--muted);
  font-size: 15px;
  line-height: 1.5;
}

.quest-area{
  position:relative;
  width: 100%;
  height: 320px;
  border-radius: 18px;
  background:
    radial-gradient(900px 420px at 50% 60%, rgba(255,255,255,.06), transparent 55%),
    rgba(0,0,0,.14);
  border: 1px solid rgba(255,255,255,.10);
  overflow:hidden;
}

/* clickable hearts */
.heart{
  position:absolute;
  width: 22px;
  height: 22px;
  border: 0;
  padding: 0;
  background: transparent;
  cursor:pointer;
  transform: translate(-50%, -50%);
  transition: transform .15s ease, opacity .2s ease, filter .2s ease;
  filter: drop-shadow(0 0 10px rgba(255,77,141,.35));
}

.heart:hover{ transform: translate(-50%, -50%) scale(1.12); }
.heart:active{ transform: translate(-50%, -50%) scale(0.98); }

.heart::before{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(180deg, var(--pink2), var(--pink));
  clip-path: path("M10.9 19.2C6 16.2 2.6 13.2 2.6 9.5C2.6 6.8 4.6 4.8 7.2 4.8C8.8 4.8 10.1 5.5 10.9 6.6C11.7 5.5 13 4.8 14.6 4.8C17.2 4.8 19.2 6.8 19.2 9.5C19.2 13.2 15.8 16.2 10.9 19.2Z");
  /* If your browser doesn’t support clip-path:path, it will still look fine because of glow */
}

.heart.small{
  width: 18px;
  height: 18px;
  opacity: .85;
}

.heart.collected{
  opacity: 0;
  pointer-events:none;
  transform: translate(-50%, -50%) scale(.6);
}

/* big reveal */
.reveal{
  margin-top: 18px;
  padding: 16px;
  border-radius: 18px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
}

.big-question{
  margin: 0 0 12px;
  font-size: clamp(22px, 3.2vw, 32px);
  line-height: 1.15;
  font-weight: 900;
}

.btn-row{
  display:flex;
  gap: 10px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

.secondary{
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.08);
  color: rgba(255,255,255,.92);
  border-radius: 999px;
  padding: 12px 16px;
  font-weight: 700;
  cursor:pointer;
}
.secondary:hover{ filter: brightness(1.05); }

/* ===== Act 3 Upgrades: Spotlight + Floating + Warmer hints ===== */
.quest-area{
  position:relative;
}

/* dark veil with a circular "spotlight" */
.quest-area::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius: 18px;
  pointer-events:none;

  /* default spotlight center (will be updated by JS) */
  --mx: 50%;
  --my: 50%;

  background:
    radial-gradient(circle 95px at var(--mx) var(--my),
      rgba(0,0,0,0) 0%,
      rgba(0,0,0,.55) 55%,
      rgba(0,0,0,.70) 100%);
}

/* Hearts are not obvious until the spotlight passes */
.heart.small{
  opacity: .08;              /* almost invisible */
  transform: translate(-50%, -50%) scale(.95);
  filter: drop-shadow(0 0 0 rgba(255,77,141,0));
  animation: heartFloat 2.8s ease-in-out infinite;
}

@keyframes heartFloat{
  0%,100%{ transform: translate(-50%, -50%) translateY(0px) scale(.95); }
  50%{ transform: translate(-50%, -50%) translateY(-10px) scale(.98); }
}

/* When "revealed" by spotlight proximity */
.heart.revealed{
  opacity: .95;
  filter: drop-shadow(0 0 14px rgba(255,77,141,.6));
}

/* =========================
   FINAL REVEAL
========================= */
.final-wrap{
  margin-top: 26px;
  min-height: 92vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 28px 0;
}

.final-title{
  margin: 6px 0 10px;
  font-size: clamp(26px, 3.6vw, 38px);
  line-height: 1.1;
  font-weight: 950;
}

.final-note{
  margin: 0 0 18px;
  color: rgba(255,255,255,.88);
  font-size: 15px;
  line-height: 1.6;
}

.final-box{
  margin-top: 14px;
  padding: 16px;
  border-radius: 18px;
  background: linear-gradient(180deg, rgba(255,122,178,.14), rgba(255,255,255,.06));
  border: 1px solid rgba(255,255,255,.14);
}

.final-row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
  margin-top: 14px;
}

.letter-wrap{
  margin-top: 14px;
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
}

.letter-img{
  width: 100%;
  max-width: 520px;
  height: auto;
  display: block;
  margin: 0 auto;
  border-radius: 16px;
  background: rgba(0,0,0,.18);
  border: 1px solid rgba(255,255,255,.12);
}



.letter-actions{
  padding: 12px;
  display:flex;
  gap:10px;
  justify-content:flex-end;
  flex-wrap:wrap;
}

@media (max-width: 520px){
  .page{ padding: 24px 14px 90px; }
  .act-content{ padding: 18px 14px; border-radius: 18px; }
  .title{ font-size: 30px; }
  .star-field, .quest-area{ height: 260px; }
  .final-row{ flex-direction: column; gap: 10px; align-items: stretch; }
  .primary, .secondary{ width: 100%; justify-content: center; }
}





